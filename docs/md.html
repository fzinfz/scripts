<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Markdown helper</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
        crossorigin="anonymous">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <div class="d-flex justify-content-between">
        <h4 />
        <h4 class="text-muted">Raw Text To Markdown Table Live</h4>
        <a href="https://github.com/fzinfz/scripts/blob/master/docs/md.html">Source Code</a>
    </div>
    <div class="container">
        <form>
            <textarea class="form-control m-1" id="raw" rows="5"></textarea>
            <textarea class="form-control m-1" id='raw2table_result' rows="8"></textarea>
            <button id="btn_copy" class="btn btn-info m-1" onclick="javascript:return false;">Copy</button>
            <button id="btn_del" class="btn btn-secondary m-1" onclick="javascript:return false;">Delete</button>
            <label id="hint"></label>
            <div id="preview"></div>
        </form>
    </div>
    <div>
        <div class="d-flex justify-content-center">
            <h3 class="text-muted" class="text-center">HTML Table To Markdown Table tools</h3>
        </div>
        <div class="container">
            <p>This tool can only convert simple tables, try html table converters if it doesn't work well.
                <br />E.g.:</p>
            <p>
                <a href="http://cdn.rawgit.com/sunnywalker/be7b2225b0ff175618c76695f7a888e1/raw/fe74588b46c1133c315904fd7f6b54938cc1f37c/html-table-to-markdown-extra.html">HTML Table to Markdown Extra Table</a>
            </p>
            <p>
                <a href="https://cdn.rawgit.com/johnbeech/html-table-to-markdown-converter/master/table-converter.html">HTML Table to Markdown Converter</a>
            </p>
        </div>
    </div>

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
        crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/showdownjs/showdown/1.8.5/dist/showdown.min.js"></script>

    <script>
        $('a').attr('target', '_blank');

        var converter = new showdown.Converter();
        converter.setOption('tables', 'true');
        function md_preview() {
            setTimeout(() => {
                document.getElementById('preview').innerHTML
                    = converter.makeHtml($('#raw2table_result').val());
                $('table').attr('class', 'table');
            }, 100);
        }

        function md_raw2html() {
            var raw = $('#raw').val()
                .replace(/(^|$|\t)/g, "|")
                .replace(/\|\t\|/g, "|\t")
                .replace(/\n/g, "|\n|")
                ;
            var head_line = raw.match(/.*/)[0].replace(/[^\|]+/g, "---");
            var result = raw.replace(/\n/, ["\n", head_line, "\n"].join(""));
            $('#raw2table_result').val(result);
            md_preview();
        }

        $("#raw").on("select paste input", md_raw2html);
        $('#raw2table_result').on("paste input", md_preview);

        $('#btn_copy').on("click", function () {
            $('#raw2table_result').select();
            document.execCommand("copy");
            $('#hint').text("Copied");
        });

        $('#btn_del').on("click", function () {
            $('#raw2table_result').val("").focus();
        });

        //demo on load
        $('#raw').val("Col-1\tCol_2\nVal.1\tVal#2\nVal+3\tVal=4");
        $('#raw').select();
    </script>
</body>

</html>